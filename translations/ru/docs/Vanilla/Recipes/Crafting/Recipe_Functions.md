# Функции рецепта

# IRecipeFunction

Некоторые рецепты поддерживают пользовательские функции, чтобы программно определить их вывод.  
Это может быть особенно полезно, если вам нужна информация о вводе предмета, например, значение урона.  
Это так называемая IRecipeFunction.

## Пример для ремонта кирки

```zenscript
val diaPick = <minecraft:diamond_pickaxe>;

//Мы начинаем нормально, написав
recipes.addShapeless("pickrepair",diaPick,

//, затем входной массив. Одно изменение, хотя и - мы отмечаем алмазную кирку, поэтому мы можем использовать ее в функции позже
[diaPick. nyDamage().marked("mark"),<minecraft:diamond>],

//сейчас мы начинаем делать определение функции. 
//Ему нужны 3 параметра, один для вывода и один для создания информации. 
//Однако нам понадобится только входной параметр.
function(out, ins, cInfo){

    //теперь мы возвращаем кирку с 0 DMG или текущий урон -10, что выше. Это предотвращает отрицательные значения урона.
    return ins.mark.withDamage(max(0,ins.mark.damage - 10));
}, 
//Нам не нужен рецепт здесь, так что просто установите его в null
null);
```

## Как настроить IRecipeFunction

Как вы могли видеть в примере выше, есть функция с тремя параметрами:  
Поэтому вам не нужно их называть, они могут иметь любое имя.

`из` это вывод рецепта и объект IItemStack.  
`ins` - это карта с отметками как ключи и помеченные как значения.  
`cInfo` является объектом ICraftingInfo

Функция должна возвращать IItemStack, который рецепт должен выводить.

Вы можете аннулировать рецепт, вернув `null` , поэтому он не может быть создан при определенных условиях.

Изменение `в` здесь плохая идея, эта функция вызывает для каждого изменения в сетке крафта, а не когда на самом деле вытаскивает результат.

# IRecipeAction

Но CraftTweaker выходит за рамки простого расчета выходов с помощью функций.  
с помощью IRecipeAction Function, вы также можете определить, что должно произойти, когда пользователь создает предмет.  
После IRecipeAction происходит объект IRecipeFunction!

```zenscript
val stone = <minecraft:stone>;

recipes.addShapeless("опыт камня",каменный,[камень,каменный,каменный,каменный],
//IrecipeFunction, просто верните вывод, это не интересует нас на этот раз.
function(out,ins,cInfo){
    return out;
},
//IRecipeAction
function(out,cInfo,player){
    player.xp += 1;
});
```

Это дает игроку, который выполняет рецепт 1 уровня каждый раз, когда ремесло будет завершено. Опять же, у нас есть функция с 3 параметрами:  
`из` это вывод рецепта и объект IItemStack.  
`cInfo` является ICraftingInfo Object  
`игрок` выполняет рецепт и объект [IPlayer](/Vanilla/Players/IPlayer/).